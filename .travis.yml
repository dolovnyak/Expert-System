language: cpp
compiler: clang
os: osx
osx_image: xcode11.3
before_install:
  - pip install --user cpp-coveralls
script:
  - cmake -S . -B build -DCMAKE_CXX_FLAGS="-ftest-coverage -fprofile-arcs" -DINSTALL_DEPS=true
  - make -C build
  - ./expert_system_tests
  - ./expert_system example.txt
after_success:
  ~/Library/Python/2.7/bin/cpp-coveralls --root . -i src -i include -E ".*CMakeFiles.*" -e 'include/argparse/argparse.hpp' -e 'include/argparse' -e 'src/Parse/Lexer.lex' -e 'src/Parse/Grammar.yacc' -e 'src/Visualizer.cpp' -e 'include/Visualizer.hpp'
